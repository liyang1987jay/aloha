define(function(){var e={init:function(){this.superSize(),this.showOrHideCode(),this.checkSubmit(),this.enterSubmit(),this.checkCode()},superSize:function(){$.supersized({slide_interval:4e3,transition:1,transition_speed:1e3,performance:1,min_width:0,min_height:0,vertical_center:1,horizontal_center:1,fit_always:0,fit_portrait:1,fit_landscape:0,slide_links:"blank",slides:[{image:"images/login/1.jpg"},{image:"images/login/2.jpg"},{image:"images/login/3.jpg"},{image:"images/login/4.jpg"},{image:"images/login/5.jpg"}]})},showOrHideCode:function(){$("#hide").click(function(){$(".code").fadeOut("slow")}),$("#captcha").focus(function(){$(".code").fadeIn("fast")})},checkCode:function(){$(".code-img").find("img").attr("src",URL.checkCodeUrl+"?t="+D.time()),$(".change").click(function(){$(".code-img").find("img").attr("src",URL.checkCodeUrl+"?t="+D.time())})},checkSubmit:function(){var e=this;$(".btn-submit").click(function(){var i=$("#user_name").val(),t=$("#password").val(),o=$("#captcha").val();if(""==i)return $(".error").fadeIn("slow").html("请输入账号"),!0;if(""==t)return $(".error").fadeIn("slow").html("请输入密码"),!0;if(""==o)return $(".error").fadeIn("slow").html("请输入验证码"),!0;var s=D.json_encode({sys_user_login_name:i,sys_user_login_pass:t,code:o});D.ajax(URL.loginUrl,s,function(i){if(C.SUCCESS_CODE==i.returnCode){$.cookie("sessionId",i.result.sessionId);var t=$.parseJSON(i.result.sessionUser),o=t.sysUserLoginName;$.cookie("loginName",o),e.loginSubmit()}else $(".error").fadeIn("slow").html(i.msg),$(".change").trigger("click")})})},loginSubmit:function(){$(".input-username,dot-left").addClass("animated fadeOutRight"),$(".input-password-box,dot-right").addClass("animated fadeOutLeft"),$(".btn-submit").addClass("animated fadeOutUp"),setTimeout(function(){$(".avatar").addClass("avatar-top"),$(".submit").hide(),$(".submit2").html('<div class="progress progress-striped active"> <div class="progress-bar progress-bar-success" role="progressbar" data-transitiongoal="100"></div> </div>'),$(".progress .progress-bar").progressbar({done:function(){$(".error").fadeOut("slow").html(""),D["goto"]("main.html")}})},300)},enterSubmit:function(){$(document).keyup(function(e){13==e.keyCode&&$(".btn-submit").trigger("click")})},logout:function(){D.ajax(URL.logoutUrl,null,function(i){console.log(i),C.SUCCESS_CODE==i.returnCode&&($.removeCookie("sessionId"),$.removeCookie("loginName"),e.init())})}};require(["jquery","functions","supersized","jquery.cookie","progressbar"],function(i,t){i(function(){var i=window.document.location.href.toString(),t=i.split("#"),o=t[1];switch(o){case"logout":e.logout();break;default:e.init()}})})});